{% extends 'base_w_header.html.twig' %}

{% set modal = {
    id: 'deleteUserModal',
    title: 'Delete User',
    message: 'Are you sure you want to delete this User?',
    confirmButton: {
        label: 'Delete',
        class: 'btn-danger'
    },
    cancelButton: {
        label: 'Cancel',
        class: 'btn-secondary'
    }
} %}

{% block title %}
    Users
{% endblock %}

{% block body %}
    <style>
        table {
            table-layout: fixed;
            min-width: 70rem;
        }

        .pagination {
            margin: 0;
        }
    </style>
    <div class="container">
        <h1>Users</h1>
        {{ component('AlertContainer') }}
        <div class="row">
            <turbo-frame id="usersTable">
                <div class="col-md-12">
                    <table class="table table-striped">
                        <colgroup>
                            <col style="width: 5%">
                            <col style="width: 20%">
                            <col style="width: 20%">
                            <col style="width: 15%">
                            <col style="width: 15%">
                            <col style="width: 25%">
                        </colgroup>
                        <thead>
                        <tr>
                            <th>Id</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Created At</th>
                            <th>Updated At</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody id="user-list">
                        {% if usersPager|length > 0 %}
                            {% for user in usersPager %}
                                {{ component('UserRow', {
                                    user: user,
                                    targetModalId: modal.id
                                }) }}
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="7" class="text-center">
                                    No Users found.
                                </td>
                            </tr>
                        {% endif %}
                        </tbody>
                    </table>
                </div>
                <div class="col-md-12">
                    <div class="d-flex justify-content-between align-items-center">
                        <a class="btn btn-lg btn-primary" href="{{ path('app_index_index') }}">
                            Home
                        </a>
                        {% if usersPager.hasNextPage or usersPager.hasPreviousPage %}
                            {{ pagerfanta(usersPager) }}
                        {% endif %}
                        <a class="btn btn-lg btn-primary" href="{{ path('app_configuration_list') }}">
                            Configurations
                        </a>
                    </div>
                </div>
            </turbo-frame>
        </div>
    </div>
    {{ component('ConfirmModal', modal) }}
{% endblock %}
